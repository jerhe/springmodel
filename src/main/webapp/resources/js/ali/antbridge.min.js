!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&(define.amd||define.cmd)?define(t):(e.ant=e.Ali=e.Ali||{},t.call(e,e.Ali))}(this,function(e){"use strict";function t(){return/android/i.test(e.ua)}function n(){return/iphone|ipad/i.test(e.ua)}function o(e){return"function"===l(e)}function i(e){return"string"===l(e)}function a(e){return"object"===l(e)}function r(e){return"number"===l(e)}function l(e){return Object.prototype.toString.call(e).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function s(e,t){if(t)for(var n in t)e[n]=t[n];return e}function c(){if(e.debug>0){var t=+new Date,n=[].slice.call(arguments);console.log(t,n),e.debug>1&&e.diagnose(t+"^"+JSON.stringify(n))}}function u(e,t){return e=e||{},e.errorCode=e.error||0,e.errorCode>0&&e.errorCode<10?console.error(t+" error: errorCode: "+e.errorCode+", errorMessage: "+e.errorMessage):c(t+", callback:",e),e}function d(t){var n=e.alipayVersion.split(".");t=t.split(".");for(var o,i,a=0;a<n.length;a++){if(o=parseInt(t[a],10)||0,i=parseInt(n[a],10)||0,o>i)return-1;if(i>o)return 1}return 0}return e=e||{},e.ua=navigator.userAgent,e.version="1.1.0",e.isAlipay=function(){return e.ua.indexOf("AlipayClient")>-1||e.ua.indexOf("AliApp(AP")>-1}(),e.isAlipay||console.warn("Run antBridge.js in AlipayClient please!"),e.alipayVersion=function(){if(e.isAlipay){var t=e.ua.match(/AlipayClient\/(.*)/);return t&&t.length?t[1]:""}}(),e.appinfo={engine:"alipay",engineVer:e.alipayVersion,name:"alipay",ver:e.alipayVersion},e.on=function(e,t){e.split(/\s+/g).forEach(function(e){document.addEventListener(e,t,!1)})},e.call=function(){var t=[].slice.call(arguments);if(window.AlipayJSBridge&&window.AlipayJSBridge.call){var n=t[0],r=t[1]||{},l=t[2];if(!i(n))return void console.error("apiName error：",n);if(void 0===l&&o(r)&&(l=r,r={}),!a(r))return void console.error(n+": options is not object");var s=l;l=function(e){e=u(e,n),s&&s(e)},"remoteLog"!==n&&c("AlipayJSBridge.call:",n,r,s),window.AlipayJSBridge.call(n,r,l)}else e._apiQueue=e._apiQueue||[],e._apiQueue.push(t)},e._ready=function(t){window.AlipayJSBridge&&window.AlipayJSBridge.call?t&&t():e.on("AlipayJSBridgeReady",t)},e.ready=e.ready||e._ready,e.toast=function(n,o){(i(n)||r(n))&&(n={text:n+""}),n=n||{},n.content=n.text,n.duration=n.duration||2e3,o&&r(n.duration)&&t()?(n.duration=n.duration<2500?2e3:3e3,e.call("toast",n),setTimeout(o,n.duration)):e.call("toast",n,o)},e.setTitle=function(t,n){var o={type:"title"};return i(t)&&(t={title:t}),t.title=t.title||t.text,s(o,t),null===o.title?(console.error("setTitle: title is required！"),!1):void e.call("setTitle",o,n)},e.showTitle=function(t){e.call("showTitlebar",t)},e.hideTitle=function(t){e.call("hideTitlebar",t)},e.showLoading=function(t,o){if((i(t)||r(t))&&(t={text:t+""}),t=t||{},t.delay=t.delay||1e3,r(t.delay)&&n()){var a=t.delay;delete t.delay;var l=setTimeout(function(){e.call("showLoading",t,o)},a);return e._stLoadingQueue=e._stLoadingQueue||[],e._stLoadingQueue.push(l),l}e.call("showLoading",t,o)},e.hideLoading=function(t){if("array"===l(e._stLoadingQueue)&&e._stLoadingQueue.length)for(c("clearLoadingCount: "+e._stLoadingQueue.length);e._stLoadingQueue.length;)clearTimeout(e._stLoadingQueue.shift());e.call("hideLoading",t)},e.pushWindow=function(n,o){return i(n)&&(n={url:n}),n=n||{},n.url?(n.param&&t()&&d("8.3")<0&&console.warn('Ali.pushWindow: can not use "param" in android\'s client 8.3-'),void e.call("pushWindow",n,o)):(console.error("Ali.pushWindow: url is required！"),!1)},e.popWindow=function(t,n){e.call("popWindow",t,n)},e.popTo=function(t,n){r(t)?t={step:t}:i(t)&&(t={urlPattern:t}),void 0!==t.step&&(t.index=t.step),e.call("popTo",t,n)},e.login=function(t){e.call("login",t)},e.tradePay=function(t,n){e.call("tradePay",t,n)},e.h5TradePay=function(e,t){console.error("alpayClient don't support Ali.h5TradePay，please use Ali.tradePay"),t&&t({errorCode:1,errorMessage:"接口不存在"})},e.geolocation={},e.geolocation.getCurrentPosition=function(t,n){void 0===n&&o(t)&&(n=t,t=null),t=t||{timeout:15e3};var i=setTimeout(function(){i=null,console.error("geolocation.getCurrentPosition: timeout");var e={errorCode:5,errorMessage:"调用超时"};n&&n(e)},t.timeout);e.call("getLocation",function(e){i&&(clearTimeout(i),e.coords={},e.coords.latitude=+e.latitude,e.coords.longitude=+e.longitude,e.city=e.city?e.city:e.province,e.cityCode=e.citycode,e.address=e.pois,n&&n(e))})},e.shake={},e.shake.watch=function(t,n){e.call("watchShake",t,n)},e.vibration={},e.vibration.vibrate=function(t,n){r(t)&&(t={duration:t}),e.call("vibrate",t,n)},e.network={},e.network.getType=function(t,n){void 0===n&&o(t)&&(n=t,t=null),t=t||{timeout:15e3};var i=setTimeout(function(){i=null,console.error("network.getType: timeout");var e={errorCode:5,errorMessage:"调用超时"};n&&n(e)},t.timeout);e.call("getNetworkType",function(e){i&&(clearTimeout(i),e.networkAvailable="fail"!==e.networkType,e.is3G=e.is2G=e.isE=e.isG=e.isH=!1,e.isWifi="wifi"===e.networkType,e.isOnline=e.networkAvailable,e.type=e.networkType,n&&n(e,e.networkAvailable))})},e.calendar={},e.calendar.add=function(t,n){d("8.3")<0?(console.error("Ali.calendar.add: 在 8.3 及以上版本使用"),n&&n({errorCode:1,errorMessage:"接口不存在"})):e.call("addEventCal",t,n)},e.photo=function(t,n){void 0===n&&o(t)&&(n=t,t={});var i={format:"jpg",dataType:"dataurl",quality:50,allowEdit:!1,src:void 0,cameraType:void 0,maskImg:void 0,maskWidth:void 0,maskHeight:void 0};s(i,t),i.imageFormat=i.format,"remoteurl"==i.dataType&&(i.dataType="dataurl"),i.dataType=i.dataType.slice(0,-3)+i.dataType.slice(-3).toUpperCase(),e.call("photo",i,function(e){e.dataURL&&(e.dataURL="data:image/"+i.imageFormat+";base64,"+e.dataURL),e.photo=e.dataURL||e.fileURL,e.errorMessage=10==e.error?"用户取消":e.errorMessage,n&&n(e)})},e.contacts={},e.contacts.get=function(t,n){void 0===n&&o(t)&&(n=t,t=null),t=t||{},t.multiple&&console.error("仅支持单选"),e.call("contact",t,function(e){switch(e.results=[],e.results[0]={phoneNumber:e.mobile,email:void 0,name:e.name},e.errorCode){case 10:e.errorMessage="没有权限";break;case 11:e.errorMessage="用户取消操作"}n&&n(e)})},e.share=function(n,o){var i={1:"Weixin",2:"Weibo",4:"SMS",8:"LaiwangContacts",16:"LaiwangTimeline",32:"WeixinTimeLine",64:"CopyLink"};n=n||{};var a=n;if(n.channels&&0!==n.channels.length)t()&&n.channels.forEach(function(e){"qzone"===e.name.toLowerCase()&&(e.name="QQZone")});else{n.title=n.title||"",n.content=n.text,n.imageUrl=n.image,n.captureScreen=!!n.captureScreen,n.url=n.url||"",a={channels:[]},"undefined"==typeof n.shareType&&(n.shareType=-1);for(var r in i)Number(r)&n.shareType&&a.channels.push({name:i[r],param:n})}e.call("share",a,o)},e.debugEnabled=function(t){e.debug=t===!0?2:1},e.getLaunchParams=function(t){e._ready(function(){e.launchParams=AlipayJSBridge.startupParams,t&&t(e.launchParams)})},e.setOptionMenu=function(t,n){i(t)&&(t=/^http/i.test(t)?{icon:t}:{title:t}),e.call("setOptionMenu",t,n)},e.alert=function(t,n){(i(t)||r(t))&&(t={message:t+""}),e.call("alert",t,n)},e.confirm=function(t,n){(i(t)||r(t))&&(t={message:t+""}),e.call("confirm",t,n)},e.openInBrowser=function(t,n){i(t)&&(t={url:t}),e.call("openInBrowser",t,n)},e.diagnose=function(t){if(!n())return console.warn("diagnose only in iOS"),!1;if(a(t)||"array"===l(t))t=JSON.stringify(t);else if(!i(t)&&!r(t))return console.error("diagnose must be string or json"),!1;t=location.href+": "+t,t={type:"diagnose",seedId:"H5_DIAGNOSED_JSLOG",param1:t};var o=["remoteLog",t];window.AlipayJSBridge&&window.AlipayJSBridge.call?window.AlipayJSBridge.call("remoteLog",t):(e._apiQueue=e._apiQueue||[],e._apiQueue.push(o))},e.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?t(e):void console.error("Not support requestAnimationFrame!")},e.mtop=function(t,n){"undefined"!=typeof t.needWua&&"undefined"==typeof t.isNeedWua&&(t.isNeedWua=t.needWua),e.call("mtop",t,n)},e.actionSheet=function(n,o){t()&&("undefined"==typeof n.title||""===n.title)&&(n.title=" "),e.call("actionSheet",n,o)},e._ready(function(){function t(){e.requestAnimationFrame(function(){var o=n.shift();e.call.apply(null,o),n.length&&t()})}c("AlipayJSBridgeReady");var n=e._apiQueue||[];!!n.length&&t()}),["startApp","showOptionMenu","hideOptionMenu","showToolbar","hideToolbar","closeWebview","sendSMS","scan","getSessionData","setSessionData","checkJSAPI","checkApp","isInstalledApp","deposit","chooseContact","alipayContact","getConfig","getCities","rsa","getWifiList","connectWifi","notifyWifiShared","thirdPartyAuth","getThirdPartyAuthcode","setToolbarMenu","exitApp","hideBackButton","startApp","startPackage","getSharedData","setSharedData","removeSharedData","setClipboard","startDownload","stopDownload","getDownloadInfo","detectBeacons","startBeaconsBeep","stopBeaconsBeep","startIndoorLocation","stopIndoorLocation","addEventCal","startSpeech","stopSpeech","cancelSpeech","getWifiInfo","clearAllCookie","getMtopToken","getClientInfo","sinasso","getClipboard","checkBLEAvalability","scanBeacons","isSpeechAvailable","speechRecognizer","contactSync","setGestureBack","remoteLog","httpRequest","rpc","ping","snapshot","imageViewer","upload","networkAnalysis","showTitleLoading","hideTitleLoading","getLocation"].forEach(function(t){e[t]=function(){var n=[].slice.call(arguments);e.call.apply(null,[t].concat(n))}}),e});